<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>3.3. The Build Process &mdash; Maasu Internship 3 - STM32 1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../../_static/assets/jsonview.bundle.css?v=f6ef2277" />
      <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-needs/libs/html/datatables.min.css?v=4b4fd840" />
      <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-needs/common.css?v=bd9ab754" />
      <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-needs/styles.css?v=6c8eb985" />
      <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-needs/modern.css?v=ffa536d2" />
      <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-needs/layouts.css?v=448c382f" />

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../_static/documentation_options.js?v=29a6c3e3"></script>
        <script src="../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../_static/assets/jsonview.bundle.js?v=18cd53c5"></script>
        <script src="../../../_static/assets/jsonview_loader.js?v=f7ff7e7d"></script>
        <script src="../../../_static/sphinx-needs/libs/html/datatables.min.js?v=8a4aee21"></script>
        <script src="../../../_static/sphinx-needs/libs/html/datatables_loader.js?v=a2cae175"></script>
        <script src="../../../_static/sphinx-needs/libs/html/sphinx_needs_collapse.js?v=f783d6a5"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="3.4. CMSIS and Register Definitions" href="cmsis_register.html" />
    <link rel="prev" title="3.2. STM32F411 Overview" href="stm32f411_overview.html" />
<link href="../../../_static/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            Maasu Internship 3 - STM32
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction/introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../project/project.html">2. Project Overview</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../fundamentals.html">3. Fundamentals</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="introduction.html">3.1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="stm32f411_overview.html">3.2. STM32F411 Overview</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">3.3. The Build Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="cmsis_register.html">3.4. CMSIS and Register Definitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="protocols.html">3.5. Communication Protocols</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../lessons/lessons.html">4. Lessons Learned by Interns</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../environment_setup/environment_setup.html">5. Development Environment Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../requirements/requirements.html">6. Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../architecture/architecture.html">7. Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../implementation/implementation.html">8. Implementation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing/testing.html">9. Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faqs/faqs.html">10. Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary/glossary.html">11. Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Maasu Internship 3 - STM32</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../fundamentals.html"><span class="section-number">3. </span>Fundamentals</a></li>
      <li class="breadcrumb-item active"><span class="section-number">3.3. </span>The Build Process</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/userdoc/fundamentals/lessons/build_process.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="the-build-process">
<h1><span class="section-number">3.3. </span>The Build Process<a class="headerlink" href="#the-build-process" title="Link to this heading"></a></h1>
<p>Before diving into the code, let’s first review how source code is turned into machine code and uploaded to the microcontroller. The figure below shows a simplified overview of this process:</p>
<a class="reference internal image-reference" href="../../../_images/build1.png"><img alt="../../../_images/build1.png" src="../../../_images/build1.png" style="width: 700px;" /></a>
<p>First, our source files are passed into the (cross-)compiler which turns them into individual object files. The object files are then “linked together” by the linker to form an executable. We then use a programmer to upload the executable to the microcontroller, which then executes our code.
Let’s go into a bit more detail with a concrete example. We are going to need the following files:
- a linker script: <cite>linker_script.ld</cite>
- startup code: <cite>startup.c</cite>
- application code: <cite>main.c</cite></p>
<p>The .c source files are passed to the C compiler (<cite>arm-none-eabi-gcc</cite>) which creates an object file for each source file. These object files are then passed to the linker (<cite>arm-none-eabi-ld</cite>) along with a linker script, telling the linker where each section of the object files should be placed in memory on the microcontroller. The output of the linker is our final executable binary file <cite>blink.elf</cite>. In practice, we will not be invoking <cite>gcc</cite> and <cite>ld</cite> separately, since pre-processing, compiling and linking is all handled by just invoking <cite>gcc</cite>. If we are interested in any of the intermediate output, there are <a class="reference external" href="https://gcc.gnu.org/onlinedocs/gcc/Overall-Options.html#Overall-Options">several command-line options available</a>, for example <cite>-c</cite> to return the compiled object files without linking or <cite>-Wl</cite>,`-Map=filename.map` to instruct the linker to output the memory map file.</p>
<a class="reference internal image-reference" href="../../../_images/build2.png"><img alt="../../../_images/build2.png" src="../../../_images/build2.png" style="width: 700px;" /></a>
<p>After building the executable, we are ready to flash it to the target. Our host PC communicates through OpenOCD with the ST-LINK programmer, which in turn communicates with the microcontroller. Our executable is stored in non-volatile flash memory as specified in the linker script. When the microcontroller boots up, our startup code will ensure that the initialized data section (<cite>.data</cite>) is copied to SRAM and the uninitialized data section (<cite>.bss</cite>) is filled with zeroes. Then the <cite>main()</cite> function is called and our application is running.</p>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="stm32f411_overview.html" class="btn btn-neutral float-left" title="3.2. STM32F411 Overview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="cmsis_register.html" class="btn btn-neutral float-right" title="3.4. CMSIS and Register Definitions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Maasu BH d.o.o..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>